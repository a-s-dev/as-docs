<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `history` mod in crate `places`."><meta name="keywords" content="rust, rustlang, rust-lang, history"><title>places::storage::history - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../places/index.html'><div class='logo-container'><img src='../../../rust-logo.png' alt='logo'></div></a><p class='location'>Module history</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#statics">Statics</a></li><li><a href="#functions">Functions</a></li></ul></div><p class='location'><a href='../../index.html'>places</a>::<wbr><a href='../index.html'>storage</a></p><script>window.sidebarCurrent = {name: 'history', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../src/places/storage/history.rs.html#5-2868' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../../index.html'>places</a>::<wbr><a href='../index.html'>storage</a>::<wbr><a class="mod" href=''>history</a></span></h1><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="history_sync/index.html" title='places::storage::history::history_sync mod'>history_sync</a></td><td class='docblock-short'></td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.PageToClean.html" title='places::storage::history::PageToClean struct'>PageToClean</a></td><td class='docblock-short'></td></tr></table><h2 id='statics' class='section-header'><a href="#statics">Statics</a></h2>
<table><tr class='module-item'><td><a class="static" href="static.DELETION_HIGH_WATER_MARK_META_KEY.html" title='places::storage::history::DELETION_HIGH_WATER_MARK_META_KEY static'>DELETION_HIGH_WATER_MARK_META_KEY</a></td><td class='docblock-short'><p>When <code>delete_everything</code> is called (to perform a permanent local deletion), in
addition to performing the deletion as requested, we make a note of the time
when it occurred, and refuse to sync incoming visits from before this time.</p>
</td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.add_visit.html" title='places::storage::history::add_visit fn'>add_visit</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.apply_observation.html" title='places::storage::history::apply_observation fn'>apply_observation</a></td><td class='docblock-short'><p>Returns the RowId of a new visit in moz_historyvisits, or None if no new visit was added.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.apply_observation_direct.html" title='places::storage::history::apply_observation_direct fn'>apply_observation_direct</a></td><td class='docblock-short'><p>Returns the RowId of a new visit in moz_historyvisits, or None if no new visit was added.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.cleanup_pages.html" title='places::storage::history::cleanup_pages fn'>cleanup_pages</a></td><td class='docblock-short'><p>Clean up pages whose history has been modified, by either
removing them entirely (if they are marked for removal,
typically because all visits have been removed and there
are no more foreign keys such as bookmarks) or updating
their frecency.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_all_visits_for_page.html" title='places::storage::history::delete_all_visits_for_page fn'>delete_all_visits_for_page</a></td><td class='docblock-short'><p>Removes all visits from a page.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_everything.html" title='places::storage::history::delete_everything fn'>delete_everything</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_page.html" title='places::storage::history::delete_page fn'>delete_page</a></td><td class='docblock-short'><p>Deletes a page. Note that this throws a constraint violation if the page is
bookmarked, or has a keyword or tags.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_place_visit_at_time.html" title='places::storage::history::delete_place_visit_at_time fn'>delete_place_visit_at_time</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_place_visit_at_time_by_href.html" title='places::storage::history::delete_place_visit_at_time_by_href fn'>delete_place_visit_at_time_by_href</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_place_visit_at_time_in_tx.html" title='places::storage::history::delete_place_visit_at_time_in_tx fn'>delete_place_visit_at_time_in_tx</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_visits_between.html" title='places::storage::history::delete_visits_between fn'>delete_visits_between</a></td><td class='docblock-short'><p>Delete all visits in a date range.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_visits_between_in_tx.html" title='places::storage::history::delete_visits_between_in_tx fn'>delete_visits_between_in_tx</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_visits_for.html" title='places::storage::history::delete_visits_for fn'>delete_visits_for</a></td><td class='docblock-short'><p>Deletes all visits for a page given its GUID, creating tombstones if
necessary.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.delete_visits_for_in_tx.html" title='places::storage::history::delete_visits_for_in_tx fn'>delete_visits_for_in_tx</a></td><td class='docblock-short'><p>Internal function for deleting a page, creating a tombstone if necessary.
Assumes a transaction is already set up by the caller.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.frecency_stale_at.html" title='places::storage::history::frecency_stale_at fn'>frecency_stale_at</a></td><td class='docblock-short'><p>Indicates if and when a URL's frecency was marked as stale.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.get_top_frecent_site_infos.html" title='places::storage::history::get_top_frecent_site_infos fn'>get_top_frecent_site_infos</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.get_visit_count.html" title='places::storage::history::get_visit_count fn'>get_visit_count</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.get_visit_infos.html" title='places::storage::history::get_visit_infos fn'>get_visit_infos</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.get_visit_page.html" title='places::storage::history::get_visit_page fn'>get_visit_page</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.get_visit_page_with_bound.html" title='places::storage::history::get_visit_page_with_bound fn'>get_visit_page_with_bound</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.get_visited.html" title='places::storage::history::get_visited fn'>get_visited</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.get_visited_into.html" title='places::storage::history::get_visited_into fn'>get_visited_into</a></td><td class='docblock-short'><p>Low level api used to implement both get_visited and the FFI get_visited call.
Takes a slice where we should output the results, as well as a slice of
index/url pairs.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.get_visited_urls.html" title='places::storage::history::get_visited_urls fn'>get_visited_urls</a></td><td class='docblock-short'><p>Get the set of urls that were visited between <code>start</code> and <code>end</code>. Only considers local visits
unless you pass in <code>include_remote</code>.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.href_to_guid.html" title='places::storage::history::href_to_guid fn'>href_to_guid</a></td><td class='docblock-short'><p>Returns the GUID for the specified Url String, or None if it doesn't exist.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.insert_tombstone_for_page.html" title='places::storage::history::insert_tombstone_for_page fn'>insert_tombstone_for_page</a></td><td class='docblock-short'><p>Inserts a Sync tombstone for a page.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.insert_tombstones_for_all_page_visits.html" title='places::storage::history::insert_tombstones_for_all_page_visits fn'>insert_tombstones_for_all_page_visits</a></td><td class='docblock-short'><p>Inserts Sync tombstones for all of a page's visits.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.prune_destructively.html" title='places::storage::history::prune_destructively fn'>prune_destructively</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.update_frecency.html" title='places::storage::history::update_frecency fn'>update_frecency</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.url_to_guid.html" title='places::storage::history::url_to_guid fn'>url_to_guid</a></td><td class='docblock-short'><p>Returns the GUID for the specified Url, or None if it doesn't exist.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.wipe_local.html" title='places::storage::history::wipe_local fn'>wipe_local</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.wipe_local_in_tx.html" title='places::storage::history::wipe_local_in_tx fn'>wipe_local_in_tx</a></td><td class='docblock-short'></td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../";window.currentCrate = "places";</script><script src="../../../aliases.js"></script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>