<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `CREATE_SYNC_TEMP_TABLES_SQL` constant in crate `places`."><meta name="keywords" content="rust, rustlang, rust-lang, CREATE_SYNC_TEMP_TABLES_SQL"><title>places::db::schema::CREATE_SYNC_TEMP_TABLES_SQL - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc constant"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../places/index.html'><div class='logo-container'><img src='../../../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><p class='location'><a href='../../index.html'>places</a>::<wbr><a href='../index.html'>db</a>::<wbr><a href='index.html'>schema</a></p><script>window.sidebarCurrent = {name: 'CREATE_SYNC_TEMP_TABLES_SQL', ty: 'constant', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../src/places/db/schema.rs.html#28' title='goto source code'>[src]</a></span><span class='in-band'>Constant <a href='../../index.html'>places</a>::<wbr><a href='../index.html'>db</a>::<wbr><a href='index.html'>schema</a>::<wbr><a class="constant" href=''>CREATE_SYNC_TEMP_TABLES_SQL</a></span></h1><pre class='rust const'>const CREATE_SYNC_TEMP_TABLES_SQL: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a> = &quot;-- This Source Code Form is subject to the terms of the Mozilla Public\n-- License, v. 2.0. If a copy of the MPL was not distributed with this\n-- file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n-- This file defines temp tables and views for the Sync connection.\n\nCREATE TEMP TABLE changeGuidOps(\n    localGuid TEXT PRIMARY KEY,\n    mergedGuid TEXT UNIQUE NOT NULL,\n    syncStatus INTEGER,\n    level INTEGER NOT NULL,\n    lastModified INTEGER NOT NULL -- In milliseconds.\n) WITHOUT ROWID;\n\nCREATE TEMP TABLE itemsToApply(\n    mergedGuid TEXT PRIMARY KEY,\n    localId INTEGER UNIQUE,\n    remoteId INTEGER UNIQUE NOT NULL,\n    remoteGuid TEXT UNIQUE NOT NULL,\n    newLevel INTEGER NOT NULL,\n    newKind INTEGER NOT NULL,\n    localDateAdded INTEGER, -- In milliseconds.\n    remoteDateAdded INTEGER NOT NULL, -- In milliseconds.\n    lastModified INTEGER NOT NULL, -- In milliseconds.\n    oldTitle TEXT,\n    newTitle TEXT,\n    oldPlaceId INTEGER,\n    newPlaceId INTEGER,\n    newKeyword TEXT\n);\n\nCREATE INDEX existingItems ON itemsToApply(localId) WHERE localId NOT NULL;\n\nCREATE INDEX oldPlaceIds ON itemsToApply(newKind, oldPlaceId);\n\nCREATE INDEX newPlaceIds ON itemsToApply(newKind, newPlaceId);\n\nCREATE INDEX newKeywords ON itemsToApply(newKeyword) WHERE newKeyword NOT NULL;\n\nCREATE TEMP TABLE applyNewLocalStructureOps(\n    mergedGuid TEXT PRIMARY KEY,\n    mergedParentGuid TEXT NOT NULL,\n    position INTEGER NOT NULL,\n    level INTEGER NOT NULL,\n    lastModified INTEGER NOT NULL -- In milliseconds.\n) WITHOUT ROWID;\n\n-- Stores locally changed items staged for upload.\nCREATE TEMP TABLE itemsToUpload(\n    id INTEGER PRIMARY KEY,\n    guid TEXT UNIQUE NOT NULL,\n    syncChangeCounter INTEGER NOT NULL,\n    -- The server modified time for the uploaded record. This is *not* a\n    -- ServerTimestamp.\n    uploadedAt INTEGER NOT NULL DEFAULT -1,\n    isDeleted BOOLEAN NOT NULL DEFAULT 0,\n    parentGuid TEXT,\n    parentTitle TEXT,\n    dateAdded INTEGER, -- In milliseconds.\n    kind INTEGER,\n    title TEXT,\n    placeId INTEGER,\n    url TEXT,\n    keyword TEXT,\n    position INTEGER\n);\n\nCREATE TEMP TABLE structureToUpload(\n    guid TEXT PRIMARY KEY,\n    parentId INTEGER NOT NULL REFERENCES itemsToUpload(id)\n                              ON DELETE CASCADE,\n    position INTEGER NOT NULL\n) WITHOUT ROWID;\n\nCREATE TEMP TABLE tagsToUpload(\n    id INTEGER REFERENCES itemsToUpload(id)\n               ON DELETE CASCADE,\n    tag TEXT,\n    PRIMARY KEY(id, tag)\n) WITHOUT ROWID;\n&quot;;</pre></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../";window.currentCrate = "places";</script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>