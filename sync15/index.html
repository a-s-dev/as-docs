<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `sync15` crate."><meta name="keywords" content="rust, rustlang, rust-lang, sync15"><title>sync15 - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../sync15/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate sync15</p><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all sync15's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'sync15', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/sync15/lib.rs.html#5-45' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>sync15</a></span></h1><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="bso_record/index.html" title='sync15::bso_record mod'>bso_record</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="changeset/index.html" title='sync15::changeset mod'>changeset</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="client/index.html" title='sync15::client mod'>client</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="clients/index.html" title='sync15::clients mod'>clients</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="coll_state/index.html" title='sync15::coll_state mod'>coll_state</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="collection_keys/index.html" title='sync15::collection_keys mod'>collection_keys</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="error/index.html" title='sync15::error mod'>error</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="key_bundle/index.html" title='sync15::key_bundle mod'>key_bundle</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="migrate_state/index.html" title='sync15::migrate_state mod'>migrate_state</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="record_types/index.html" title='sync15::record_types mod'>record_types</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="request/index.html" title='sync15::request mod'>request</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="state/index.html" title='sync15::state mod'>state</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="status/index.html" title='sync15::status mod'>status</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="sync/index.html" title='sync15::sync mod'>sync</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="sync_multiple/index.html" title='sync15::sync_multiple mod'>sync_multiple</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="telemetry/index.html" title='sync15::telemetry mod'>telemetry</a></td><td class='docblock-short'><p>Note: this mostly just reexports the things from sync15_traits::telemetry.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="token/index.html" title='sync15::token mod'>token</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="util/index.html" title='sync15::util mod'>util</a></td><td class='docblock-short'></td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.BsoRecord.html" title='sync15::BsoRecord struct'>BsoRecord</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.CollState.html" title='sync15::CollState struct'>CollState</a></td><td class='docblock-short'><p>Holds state for a collection. In general, only the CollState is
needed to sync a collection (but a valid GlobalState is needed to obtain
a CollState)</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.CollSyncIds.html" title='sync15::CollSyncIds struct'>CollSyncIds</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.CollectionKeys.html" title='sync15::CollectionKeys struct'>CollectionKeys</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.CollectionRequest.html" title='sync15::CollectionRequest struct'>CollectionRequest</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.EncryptedPayload.html" title='sync15::EncryptedPayload struct'>EncryptedPayload</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.Error.html" title='sync15::Error struct'>Error</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.GlobalState.html" title='sync15::GlobalState struct'>GlobalState</a></td><td class='docblock-short'><p>Holds global Sync state, including server upload limits, the
last-fetched collection modified times, <code>meta/global</code> record, and
encrypted copies of the crypto/keys resourse (which we hold as encrypted
both to avoid keeping them in memory longer than necessary, and guard against
the wrong (ie, a different user's) root key being passed in.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.KeyBundle.html" title='sync15::KeyBundle struct'>KeyBundle</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.MemoryCachedState.html" title='sync15::MemoryCachedState struct'>MemoryCachedState</a></td><td class='docblock-short'><p>Info we want callers to store <em>in memory</em> for us so that subsequent
syncs are faster. This should never be persisted to storage as it holds
sensitive information, such as the sync decryption keys.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Payload.html" title='sync15::Payload struct'>Payload</a></td><td class='docblock-short'><p>Represents the decrypted payload in a Bso. Provides a minimal layer of type
safety to avoid double-encrypting.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.RecordChangeset.html" title='sync15::RecordChangeset struct'>RecordChangeset</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.ServerTimestamp.html" title='sync15::ServerTimestamp struct'>ServerTimestamp</a></td><td class='docblock-short'><p>Typesafe way to manage server timestamps without accidentally mixing them up with
local ones.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.SetupStateMachine.html" title='sync15::SetupStateMachine struct'>SetupStateMachine</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.Sync15StorageClient.html" title='sync15::Sync15StorageClient struct'>Sync15StorageClient</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.Sync15StorageClientInit.html" title='sync15::Sync15StorageClientInit struct'>Sync15StorageClientInit</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.SyncRequestInfo.html" title='sync15::SyncRequestInfo struct'>SyncRequestInfo</a></td><td class='docblock-short'><p>This is essentially a bag of information that the sync manager knows, but
otherwise we won't. It should probably be rethought if it gains many more
fields.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.SyncResult.html" title='sync15::SyncResult struct'>SyncResult</a></td><td class='docblock-short'><p>The result of a sync request. This too is from the &quot;sync manager&quot;, but only
has a fraction of the things it will have when we actually build that.</p>
</td></tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table><tr class='module-item'><td><a class="enum" href="enum.ErrorKind.html" title='sync15::ErrorKind enum'>ErrorKind</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="enum" href="enum.ServiceStatus.html" title='sync15::ServiceStatus enum'>ServiceStatus</a></td><td class='docblock-short'><p>The general status of sync - should probably be moved to the &quot;sync manager&quot;
once we have one!</p>
</td></tr><tr class='module-item'><td><a class="enum" href="enum.StoreSyncAssociation.html" title='sync15::StoreSyncAssociation enum'>StoreSyncAssociation</a></td><td class='docblock-short'><p>Defines how a store is associated with Sync.</p>
</td></tr><tr class='module-item'><td><a class="enum" href="enum.Sync15ClientResponse.html" title='sync15::Sync15ClientResponse enum'>Sync15ClientResponse</a></td><td class='docblock-short'><p>A response from a GET request on a Sync15StorageClient, encapsulating all
the variants users of this client needs to care about.</p>
</td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.SetupStorageClient.html" title='sync15::SetupStorageClient trait'>SetupStorageClient</a></td><td class='docblock-short'><p>A trait containing the methods required to run through the setup state
machine. This is factored out into a separate trait to make mocking
easier.</p>
</td></tr><tr class='module-item'><td><a class="trait" href="trait.Store.html" title='sync15::Store trait'>Store</a></td><td class='docblock-short'><p>Low-level store functionality. Stores that need custom reconciliation logic
should use this.</p>
</td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.extract_v1_state.html" title='sync15::extract_v1_state fn'>extract_v1_state</a></td><td class='docblock-short'><p>Given a string persisted as our old GlobalState V1 struct, extract out
the sync IDs for the collection, plus a string which should be used as the
new &quot;global persisted state&quot; (which holds the declined engines).
Returns (None, None) in early error cases (eg, invalid JSON, wrong schema
version etc). Otherwise, you can expect the returned global state to be
Some, even if the CollSyncIds is None (which can happen if the engine is
missing, or flagged for reset)</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.sync_multiple.html" title='sync15::sync_multiple fn'>sync_multiple</a></td><td class='docblock-short'><p>Sync multiple stores</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.sync_multiple_with_command_processor.html" title='sync15::sync_multiple_with_command_processor fn'>sync_multiple_with_command_processor</a></td><td class='docblock-short'><p>Like <code>sync_multiple</code>, but specifies an optional command processor to handle
commands from the clients collection. This function is called by the sync
manager, which provides its own processor.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.synchronize.html" title='sync15::synchronize fn'>synchronize</a></td><td class='docblock-short'></td></tr></table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table><tr class='module-item'><td><a class="type" href="type.CleartextBso.html" title='sync15::CleartextBso type'>CleartextBso</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="type" href="type.EncryptedBso.html" title='sync15::EncryptedBso type'>EncryptedBso</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="type" href="type.IncomingChangeset.html" title='sync15::IncomingChangeset type'>IncomingChangeset</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="type" href="type.OutgoingChangeset.html" title='sync15::OutgoingChangeset type'>OutgoingChangeset</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="type" href="type.Result.html" title='sync15::Result type'>Result</a></td><td class='docblock-short'></td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "sync15";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>