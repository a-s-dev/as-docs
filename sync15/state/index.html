<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `state` mod in crate `sync15`."><meta name="keywords" content="rust, rustlang, rust-lang, state"><title>sync15::state - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../sync15/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Module state</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></div><p class='location'><a href='../index.html'>sync15</a></p><script>window.sidebarCurrent = {name: 'state', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/sync15/state.rs.html#5-1130' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../index.html'>sync15</a>::<wbr><a class="mod" href=''>state</a></span></h1><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.EngineChangesNeeded.html" title='sync15::state::EngineChangesNeeded struct'>EngineChangesNeeded</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.EngineStateInput.html" title='sync15::state::EngineStateInput struct'>EngineStateInput</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.EngineStateOutput.html" title='sync15::state::EngineStateOutput struct'>EngineStateOutput</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.GlobalState.html" title='sync15::state::GlobalState struct'>GlobalState</a></td><td class='docblock-short'><p>Holds global Sync state, including server upload limits, the
last-fetched collection modified times, <code>meta/global</code> record, and
encrypted copies of the crypto/keys resourse (which we hold as encrypted
both to avoid keeping them in memory longer than necessary, and guard against
the wrong (ie, a different user's) root key being passed in.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.RemoteEngineState.html" title='sync15::state::RemoteEngineState struct'>RemoteEngineState</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.SetupStateMachine.html" title='sync15::state::SetupStateMachine struct'>SetupStateMachine</a></td><td class='docblock-short'></td></tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table><tr class='module-item'><td><a class="enum" href="enum.PersistedGlobalState.html" title='sync15::state::PersistedGlobalState enum'>PersistedGlobalState</a></td><td class='docblock-short'><p>State that we require the app to persist to storage for us.
It's a little unfortunate we need this, because it's only tracking
&quot;declined engines&quot;, and even then, only needed in practice when there's
no meta/global so we need to create one. It's extra unfortunate because we
want to move away from &quot;globally declined&quot; engines anyway, moving towards
allowing engines to be enabled or disabled per client rather than globally.</p>
</td></tr><tr class='module-item'><td><a class="enum" href="enum.SetupState.html" title='sync15::state::SetupState enum'>SetupState</a></td><td class='docblock-short'><p>States in the remote setup process.
TODO(lina): Add link once #56 is merged.</p>
</td></tr></table><h2 id='constants' class='section-header'><a href="#constants">Constants</a></h2>
<table><tr class='module-item'><td><a class="constant" href="constant.DEFAULT_DECLINED.html" title='sync15::state::DEFAULT_DECLINED constant'>DEFAULT_DECLINED</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="constant" href="constant.DEFAULT_ENGINES.html" title='sync15::state::DEFAULT_ENGINES constant'>DEFAULT_ENGINES</a></td><td class='docblock-short'><p>Maps names to storage versions for engines to include in a fresh
<code>meta/global</code> record. We include engines that we don't implement
because they'll be disabled on other clients if we omit them
(bug 1479929).</p>
</td></tr><tr class='module-item'><td><a class="constant" href="constant.STORAGE_VERSION.html" title='sync15::state::STORAGE_VERSION constant'>STORAGE_VERSION</a></td><td class='docblock-short'></td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.compute_engine_states.html" title='sync15::state::compute_engine_states fn'>compute_engine_states</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.fixup_meta_global.html" title='sync15::state::fixup_meta_global fn'>fixup_meta_global</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="fn" href="fn.is_same_timestamp.html" title='sync15::state::is_same_timestamp fn'>is_same_timestamp</a></td><td class='docblock-short'><p>Whether we should skip fetching an item. Used when we already have timestamps
and want to check if we should reuse our existing state. The state's fairly
cheap to recreate and very bad to use if it is wrong, so we insist on the
<em>exact</em> timestamp matching and not a simple &quot;later than&quot; check.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.new_global.html" title='sync15::state::new_global fn'>new_global</a></td><td class='docblock-short'><p>Creates a fresh <code>meta/global</code> record, using the default engine selections,
and declined engines from our PersistedGlobalState.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "sync15";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>